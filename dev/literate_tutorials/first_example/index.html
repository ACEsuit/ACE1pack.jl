<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>First example (Julia) · ACE1pack.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link rel="canonical" href="https://ACEsuit.github.io/ACE1pack.jl/literate_tutorials/first_example/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">ACE1pack.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../../gettingstarted/installation/">Installation Instructions</a></li><li><a class="tocitem" href="../../gettingstarted/pkg/">Using the Julia Package Manager</a></li><li><a class="tocitem" href="../../gettingstarted/aceintro/">Introduction to ACE Models</a></li></ul></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../tutorials/">Tutorials Overview</a></li><li><a class="tocitem" href="../../tutorials/first_example_json/">TiAl potential (command line JSON)</a></li><li class="is-active"><a class="tocitem" href>First example (Julia)</a><ul class="internal"><li><a class="tocitem" href="#Developing-a-new-ACE1.jl-model"><span>Developing a new ACE1.jl model</span></a></li></ul></li><li><a class="tocitem" href="../TiAl/">Fitting a TiAl potential (Julia)</a></li><li><a class="tocitem" href="../ACE1pack_TiAl/">TiAl potential (ACE1pack-julia)</a></li><li><a class="tocitem" href="../../tutorials/lammps/">LAMMPS</a></li><li><a class="tocitem" href="../../tutorials/python_ase/">python-<code>ase</code></a></li></ul></li><li><span class="tocitem">Command line</span><ul><li><a class="tocitem" href="../../command_line/">Command line interface</a></li></ul></li><li><span class="tocitem">ACE1pack Internals</span><ul><li><a class="tocitem" href="../../ACE1pack/ace1pack_overview/">Overview</a></li><li><a class="tocitem" href="../../ACE1pack/fit/">Fitting ACE</a></li><li><a class="tocitem" href="../../ACE1pack/helpers/">Helper Functions</a></li><li><a class="tocitem" href="../../ACE1pack/data/">Handling Data</a></li><li><a class="tocitem" href="../../ACE1pack/basis/">Constructing Basis</a></li><li><a class="tocitem" href="../../ACE1pack/solver/">Solvers</a></li><li><a class="tocitem" href="../../ACE1pack/all_exported/">All ACE1pack functions</a></li></ul></li><li><span class="tocitem">ACEfit Internals</span><ul><li><a class="tocitem" href="../../ACEfit/Fitting/">ACE1 and ACEfit</a></li><li><a class="tocitem" href="../../ACEfit/Solvers/">Least squares solvers</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href>First example (Julia)</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>First example (Julia)</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/ACEsuit/ACE1pack.jl/blob/main/tutorials/first_example.jl" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="First-example-(Julia)"><a class="docs-heading-anchor" href="#First-example-(Julia)">First example (Julia)</a><a id="First-example-(Julia)-1"></a><a class="docs-heading-anchor-permalink" href="#First-example-(Julia)" title="Permalink"></a></h1><h2 id="Developing-a-new-ACE1.jl-model"><a class="docs-heading-anchor" href="#Developing-a-new-ACE1.jl-model">Developing a new ACE1.jl model</a><a id="Developing-a-new-ACE1.jl-model-1"></a><a class="docs-heading-anchor-permalink" href="#Developing-a-new-ACE1.jl-model" title="Permalink"></a></h2><p>This is a very tutorial to demonstrate how to use ACE1 and ACEfit to construct an ACE1 model for Si by fitting to an empirical potential.</p><p>Make sure to first read the installation notes. Now start by importing the required packages:</p><pre><code class="language-julia hljs">using ACE1pack
import Random
using LinearAlgebra: norm, Diagonal</code></pre><h3 id="Step-1:-specify-the-ACE-basis"><a class="docs-heading-anchor" href="#Step-1:-specify-the-ACE-basis">Step 1: specify the ACE basis</a><a id="Step-1:-specify-the-ACE-basis-1"></a><a class="docs-heading-anchor-permalink" href="#Step-1:-specify-the-ACE-basis" title="Permalink"></a></h3><p>The ACE basis can be set up using the function <code>rpi_basis</code>, where the parameters have the following meaning:</p><ul><li><code>species</code>: chemical species, for multiple species provide a list</li><li><code>N</code> : correlation order</li><li><code>maxdeg</code>: maximum polynomial degree</li><li><code>D</code> : specifies the notion of polynomial degree for which there is no canonical definition in the multivariate setting. Here we use <code>SparsePSHDegree</code> which specifies a general class of sparse basis sets; see its documentation for more details.</li><li><code>r0</code> : an estimate on the nearest-neighbour distance for scaling, <code>JuLIP.rnn()</code> function returns element specific earest-neighbour distance</li><li><code>rin, rcut</code> : inner and outer cutoff radii</li><li><code>pin</code> :  specifies the behaviour of the basis as the inner cutoff radius.</li></ul><pre><code class="language-julia hljs">r0 = rnn(:Si)
basis = ace_basis(;
      species = :Si,
      N = 3,                        # correlation order = body-order - 1
      maxdeg = 12,                  # polynomial degree
      D = SparsePSHDegree(; wL=1.5, csp=1.0),
      r0 = r0,                      # estimate for NN distance
      rin = 0.65*r0, rcut = 5.0,    # domain for radial basis (cf documentation)
      pin = 2)
@show length(basis)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">211</code></pre><h3 id="Step-2:-Generate-a-training-set"><a class="docs-heading-anchor" href="#Step-2:-Generate-a-training-set">Step 2: Generate a training set</a><a id="Step-2:-Generate-a-training-set-1"></a><a class="docs-heading-anchor-permalink" href="#Step-2:-Generate-a-training-set" title="Permalink"></a></h3><p>Normally one would generate a training set using DFT data, store it e.g. as an <code>.xzy</code> file, which can be loaded via ACEfit. Here, we will just general a random training set to show how it will be used.</p><ul><li><code>gen_dat()</code> generates a single training configuration wrapped in an <code>ACE1pack.AtomsData</code> structure. Each <code>d::Dat</code> contains the structure <code>d.at</code>, and energy value and a force vector to train against. These are stored in the dictionary <code>d.D</code>. Other observations can also be provided. The string <code>&quot;diax$n&quot;</code> is a configtype label given to each structure which is useful in seeing what the performance of the model is on different classes of structures.</li><li><code>train</code> is then a list of 50 such training configurations.</li></ul><p>TODO: fix these hacks</p><pre><code class="language-julia hljs">weights = Dict(&quot;default&quot; =&gt; Dict(&quot;E&quot; =&gt; 15.0, &quot;F&quot; =&gt; 1.0 , &quot;V&quot; =&gt; 1.0 ))
v_ref = OneBody(&quot;Si&quot; =&gt; 0.0)

function gen_dat()
   sw = StillingerWeber()
   n = rand(2:4)
   at = rattle!(bulk(:Si, cubic=true) * n, 0.3)
   set_data!(at, &quot;energy&quot;, energy(sw,at))
   set_data!(at, &quot;forces&quot;, forces(sw,at))
   return ACE1pack.AtomsData(at, &quot;energy&quot;, &quot;forces&quot;, &quot;no_virial_key&quot;, weights, v_ref)
end

Random.seed!(0)
train = [ gen_dat() for _=1:50 ];</code></pre><h3 id="Step-3:-Estimate-Parameters"><a class="docs-heading-anchor" href="#Step-3:-Estimate-Parameters">Step 3: Estimate Parameters</a><a id="Step-3:-Estimate-Parameters-1"></a><a class="docs-heading-anchor-permalink" href="#Step-3:-Estimate-Parameters" title="Permalink"></a></h3><p>WARNING: the text is out of date</p><p>First we evaluate the basis on all training configurations. We do this by assembling an <code>LsqDB</code> which contains all information about the basis, the training data and also stores the values of the basis on the training data for later reuse e.g. to experiment with different parameter estimation algorithms, or parameters. Using the empty string <code>&quot;&quot;</code> as the filename means that the <code>LsqDB</code> will not be automatically stored to disk.</p><pre><code class="language-julia hljs">A, Y, W = ACEfit.linear_assemble(train, basis)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">([597.3313305322664 -640.9107518540218 … -43814.7174493585 -139510.64427457587; -0.09234349534068756 0.34937730927768623 … -86.7524915935957 -608.0910711820557; … ; 0.219994753289475 -0.3719762058026919 … -65.3865376644846 50.20378818754077; 0.3601141181514662 -0.07744486919232496 … 17.077694553031463 251.0053402543824], [-877.7784733741458, 0.6586143183146094, -1.6891690196546438, -3.1137588661255364, 3.263210023684023, -1.1275513876148708, -1.2727321240847005, -5.921736840785761, 1.4834249196734304, 0.13207136835468128  …  0.6267267820963721, 2.0690704810320497, 2.8391010446639298, -1.2781527485117081, -0.4772680587976902, 4.301714596334535, 2.4252977556287036, -0.23636590166768956, -2.169823224803677, -3.1633435017327303], [1.0206207261596576, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0  …  1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0])</code></pre><p>To assemble the LSQ system we now need to specify weights. If we want to give the same energy and force weights to all configurations, we can just do the following. But e.g. we could give different weights to <code>diax2, diax3, diax4</code> configs (more on this in other tutorials).</p><pre><code class="language-julia hljs">weights = Dict(&quot;default&quot; =&gt; Dict(&quot;E&quot; =&gt; 15.0, &quot;F&quot; =&gt; 1.0 , &quot;V&quot; =&gt; 1.0 ))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Dict{String, Dict{String, Float64}} with 1 entry:
  &quot;default&quot; =&gt; Dict(&quot;V&quot;=&gt;1.0, &quot;E&quot;=&gt;15.0, &quot;F&quot;=&gt;1.0)</code></pre><p>Now we can fit the potential using</p><pre><code class="language-julia hljs">solver = ACEfit.create_solver(Dict(&quot;type&quot; =&gt; &quot;qr&quot;))
C = ACEfit.linear_solve(solver, A, Y)
IP = JuLIP.MLIPs.combine(basis, C)
(v_ref != nothing) &amp;&amp; (IP = JuLIP.MLIPs.SumIP(v_ref, IP))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">JuLIP.MLIPs.SumIP{AbstractCalculator}(AbstractCalculator[OneBody{Float64}(Dict(:Si =&gt; 0.0)), PIPotential{Float64, 1, PIBasis{BasicPSH1pBasis{Float64, 1, ACE1.OrthPolys.TransformedPolys{Float64, PolyTransform{Int64, Float64}, ACE1.OrthPolys.OrthPolyBasis{Float64}}}, 1, ACE1.DAGEvaluator}, ACE1.DAGEvaluator}(PIBasis{BasicPSH1pBasis{Float64, 1, ACE1.OrthPolys.TransformedPolys{Float64, PolyTransform{Int64, Float64}, ACE1.OrthPolys.OrthPolyBasis{Float64}}}, 1, ACE1.DAGEvaluator}(BasicPSH1pBasis{Float64, 1, ACE1.OrthPolys.TransformedPolys{Float64, PolyTransform{Int64, Float64}, ACE1.OrthPolys.OrthPolyBasis{Float64}}}(ACE1.OrthPolys.TransformedPolys{Float64, PolyTransform{Int64, Float64}, ACE1.OrthPolys.OrthPolyBasis{Float64}}(ACE1.OrthPolys.OrthPolyBasis{Float64}(2, 0.31197065521111106, 2, 1.756922113528815, [5.757808866023312, 4.59063835157038, 3.7010909619584837, 3.364628147235013, 3.190260961439915, 3.0854699483149646, 3.01664039885298, 2.968627141914494, 2.933632278832203, 2.907253546776357, 2.886831041260407, 2.8706711244410306], [0.0, -4.748769244732067, -3.828580163822303, -3.4805274216566646, -3.300153916758164, -3.1917532321165902, -3.1205527535378326, -3.070885613495982, -3.0346853039089905, -3.007397919909551, -2.9862719329188065, -2.9695553653932767], [0.0, 0.0, -0.8062257748298577, -0.9090909090909131, -0.9481763873555036, -0.9671528397232834, -0.9776923610941165, -0.9840838646340561, -0.988211768804455, -0.9910081668223352, -0.9929753269925254, -0.9944021951446302], [0.3126931309402699, 0.3141380823985876, 0.31558303385690534, 0.317027985315223, 0.3184729367735407, 0.3199178882318584, 0.32136283969017615, 0.32280779114849384, 0.32425274260681153, 0.3256976940651292  …  1.7431950746747968, 1.7446400261331145, 1.7460849775914324, 1.7475299290497501, 1.7489748805080678, 1.7504198319663855, 1.7518647834247032, 1.7533097348830209, 1.7547546863413386, 1.7561996377996563], [0.001, 0.001, 0.001, 0.001, 0.001, 0.001, 0.001, 0.001, 0.001, 0.001  …  0.001, 0.001, 0.001, 0.001, 0.001, 0.001, 0.001, 0.001, 0.001, 0.001]), PolyTransform{Int64, Float64}(2, 2.35126), 1.528319, 5.0), ACE1.SphericalHarmonics.SHBasis{Float64}(7, ACE1.SphericalHarmonics.ALPCoefficients{Float64}([6.9110273893993e-310, 6.9110273893993e-310, 6.9110273893993e-310, 1.9364916731037085, 6.9110273893993e-310, 6.9110273893993e-310, 1.9720265943665387, 2.091650066335189, 6.9110273893993e-310, 6.9110273893993e-310  …  6.9110183749538e-310, 6.91102738956255e-310, 1.9948914348241344, 2.0155644370746373, 2.0816659994661326, 2.207940216581962, 2.4308621740219887, 2.850438562747845, 6.9110183749538e-310, 6.9110183749538e-310], [5.0e-324, 5.0e-324, 1.0e-323, -0.5773502691896257, 5.0e-324, 5.0e-324, -0.5163977794943222, -0.4472135954999579, 1.0e-323, 5.0e-324  …  6.9110183749538e-310, 6.91102738956255e-310, -0.5017452060042545, -0.4947274449181537, -0.47304991679126607, -0.4345240946267408, -0.3739787960033829, -0.2773500981126146, 6.9110183749538e-310, 6.9110183749538e-310])), JuLIP.Potentials.SZList{1}(AtomicNumber[&lt;14&gt;]), ACE1.RPI.PSH1pBasisFcn[znlm[0|1,0,0], znlm[0|1,1,-1], znlm[0|1,1,0], znlm[0|1,1,1], znlm[0|1,2,-2], znlm[0|1,2,-1], znlm[0|1,2,0], znlm[0|1,2,1], znlm[0|1,2,2], znlm[0|1,3,-3]  …  znlm[0|9,2,-1], znlm[0|9,2,0], znlm[0|9,2,1], znlm[0|9,2,2], znlm[0|10,0,0], znlm[0|10,1,-1], znlm[0|10,1,0], znlm[0|10,1,1], znlm[0|11,0,0], znlm[0|12,0,0]], UnitRange{Int64}[1:288;;]), JuLIP.Potentials.SZList{1}(AtomicNumber[&lt;14&gt;]), (ACE1.InnerPIBasis([1, 1, 1, 1, 1, 1, 1, 1, 1, 1  …  3, 3, 3, 3, 3, 3, 3, 3, 3, 3], [1 0 0; 65 0 0; … ; 114 163 199; 163 163 163], Dict{ACE1.PIBasisFcn, Int64}(ACE1.PIBasisFcn{3, ACE1.RPI.PSH1pBasisFcn}(&lt;14&gt;, (znlm[14|1,1,-1], znlm[14|1,1,1], znlm[14|2,2,0]), ACE1.RPI.PSH1pBasisFcn) =&gt; 472, ACE1.PIBasisFcn{2, ACE1.RPI.PSH1pBasisFcn}(&lt;14&gt;, (znlm[14|3,2,0], znlm[14|4,0,0]), ACE1.RPI.PSH1pBasisFcn) =&gt; 258, ACE1.PIBasisFcn{3, ACE1.RPI.PSH1pBasisFcn}(&lt;14&gt;, (znlm[14|2,0,0], znlm[14|2,0,0], znlm[14|2,2,0]), ACE1.RPI.PSH1pBasisFcn) =&gt; 698, ACE1.PIBasisFcn{2, ACE1.RPI.PSH1pBasisFcn}(&lt;14&gt;, (znlm[14|1,2,-2], znlm[14|5,2,2]), ACE1.RPI.PSH1pBasisFcn) =&gt; 89, ACE1.PIBasisFcn{2, ACE1.RPI.PSH1pBasisFcn}(&lt;14&gt;, (znlm[14|1,1,1], znlm[14|5,3,-1]), ACE1.RPI.PSH1pBasisFcn) =&gt; 79, ACE1.PIBasisFcn{3, ACE1.RPI.PSH1pBasisFcn}(&lt;14&gt;, (znlm[14|1,2,-1], znlm[14|2,1,0], znlm[14|3,1,1]), ACE1.RPI.PSH1pBasisFcn) =&gt; 651, ACE1.PIBasisFcn{3, ACE1.RPI.PSH1pBasisFcn}(&lt;14&gt;, (znlm[14|2,0,0], znlm[14|3,1,-1], znlm[14|3,1,1]), ACE1.RPI.PSH1pBasisFcn) =&gt; 736, ACE1.PIBasisFcn{3, ACE1.RPI.PSH1pBasisFcn}(&lt;14&gt;, (znlm[14|1,1,0], znlm[14|1,2,1], znlm[14|4,1,-1]), ACE1.RPI.PSH1pBasisFcn) =&gt; 552, ACE1.PIBasisFcn{2, ACE1.RPI.PSH1pBasisFcn}(&lt;14&gt;, (znlm[14|5,0,0], znlm[14|6,0,0]), ACE1.RPI.PSH1pBasisFcn) =&gt; 275, ACE1.PIBasisFcn{2, ACE1.RPI.PSH1pBasisFcn}(&lt;14&gt;, (znlm[14|1,2,0], znlm[14|5,0,0]), ACE1.RPI.PSH1pBasisFcn) =&gt; 106…), Dict{Any, Int64}(znlm[14|4,1,-1] =&gt; 164, znlm[14|7,3,3] =&gt; 264, znlm[14|2,3,-1] =&gt; 76, znlm[14|3,4,3] =&gt; 137, znlm[14|6,4,-3] =&gt; 241, znlm[14|1,0,0] =&gt; 1, znlm[14|1,5,-5] =&gt; 26, znlm[14|2,4,4] =&gt; 89, znlm[14|4,5,-5] =&gt; 188, znlm[14|2,6,-2] =&gt; 105…), 1:778, &lt;14&gt;, ACE1.DAG.CorrEvalGraph{Int64, Int64}([(1, 0), (2, 0), (3, 0), (4, 0), (5, 0), (6, 0), (7, 0), (8, 0), (9, 0), (10, 0)  …  (407, 114), (407, 120), (407, 163), (407, 199), (407, 224), (114, 409), (114, 412), (408, 163), (408, 199), (417, 163)], [1, 0, 0, 0, 0, 0, 0, 0, 0, 0  …  769, 770, 771, 772, 773, 774, 775, 776, 777, 778], 288, 459)),), ACE1.DAGEvaluator()), ([-7.402842471947145, -3.0697954538959658, 1.5140002528503402, 2.513455910310025, 5.841833682661757, 7.374964528943599, 6.13495978360058, 3.60599566848306, 1.6636870658255944, 0.4365779959819206  …  0.13053927264141302, 0.0, 0.18489200051126398, 0.05664438295681004, 0.015044594921084075, -0.012960857086725699, 0.006480428543362848, 0.06929828245648906, 0.027347204659546525, -0.00015818253604754095],), (ACE1.DAG.CorrEvalGraph{Float64, Int64}([(1, 0), (2, 0), (3, 0), (4, 0), (5, 0), (6, 0), (7, 0), (8, 0), (9, 0), (10, 0)  …  (407, 114), (407, 120), (407, 163), (407, 199), (407, 224), (114, 409), (114, 412), (408, 163), (408, 199), (417, 163)], [-7.402842471947145, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0  …  0.13053927264141302, 0.0, 0.18489200051126398, 0.05664438295681004, 0.015044594921084075, -0.012960857086725699, 0.006480428543362848, 0.06929828245648906, 0.027347204659546525, -0.00015818253604754095], 288, 459),), ACE1.DAGEvaluator())])</code></pre><p>This assembles the weighted LSQ system, and retuns the potential <code>IP</code> as well as a dictionary <code>lsqinfo</code> with some general information about the potential and fitting process.  E.g., to see the training errors we can use</p><pre><code class="language-julia hljs">@show ACE1pack.linear_errors(train, IP)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">Dict{String, Dict{String, Any}} with 2 entries:
  &quot;rmse&quot; =&gt; Dict(&quot;default&quot;=&gt;Dict(&quot;V&quot;=&gt;0.0, &quot;E&quot;=&gt;4.94306e-5, &quot;F&quot;=&gt;0.0113473), &quot;s…
  &quot;mae&quot;  =&gt; Dict(&quot;default&quot;=&gt;Dict(&quot;V&quot;=&gt;0.0, &quot;E&quot;=&gt;3.84374e-5, &quot;F&quot;=&gt;0.00849711), &quot;…</code></pre><p>Note that <code>IP</code> is a <code>JuLIP.jl</code> calculator and can be used to evaluate e.g. <code>energy, forces, virial</code> on new configurations.</p><h3 id="Step-4:-Run-some-tests"><a class="docs-heading-anchor" href="#Step-4:-Run-some-tests">Step 4: Run some tests</a><a id="Step-4:-Run-some-tests-1"></a><a class="docs-heading-anchor-permalink" href="#Step-4:-Run-some-tests" title="Permalink"></a></h3><p>At a minimum we should have a test set to check generalisations, but more typically we would now run extensive robustness tests. For this mini-tutorial we will just implement a very basic energy generalisation test.</p><pre><code class="language-julia hljs">test =  [ gen_dat() for _=1:20 ]
Etest = [ d.atoms.data[&quot;energy&quot;].data/length(d.atoms) for d in test ]
Emodel = [ energy(IP, d.atoms)/length(d.atoms) for d in test ]
rmse_E = norm(Etest - Emodel) / sqrt(length(test))
@show rmse_E;    # rmse_E = 5.842000599246454e-5</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">rmse_E = 8.115153059103245e-5</code></pre><hr/><p><em>This page was generated using <a href="https://github.com/fredrikekre/Literate.jl">Literate.jl</a>.</em></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../tutorials/first_example_json/">« TiAl potential (command line JSON)</a><a class="docs-footer-nextpage" href="../TiAl/">Fitting a TiAl potential (Julia) »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Friday 30 September 2022 10:23">Friday 30 September 2022</span>. Using Julia version 1.8.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
